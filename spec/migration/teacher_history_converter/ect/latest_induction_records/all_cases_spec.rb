# BLOCKS RECEIVED IN REVERSED ORDER:
# ==================================
# Every 2 consecutive pair of blocks (received in revese order of: end_date.nil? last, start_date, created_at)) is a different case:
#
#           ┌────────────────────────>
#           │
#           └────────────────────────>
#        ┌───────────────────────┐
#        │                       │
#        └───────────────────────┘
#
#    OR
#
#                  ...
#        ┌──────────────────────────────>
#        │
#        └──────────────────────────────>
#        ┌───────────────────────┐
#        │                       │
#        └───────────────────────┘
#
#    OR
#
#                  ...
#   ┌──────────────────────────────────────>
#   │
#   └──────────────────────────────────────>
#        ┌───────────────────────┐
#        │                       │
#        └───────────────────────┘
#      ┌───────────────┐
#      │               │
#      └───────────────┘
#    ┌─────────────────┐
#    │                 │
#    └─────────────────┘
# ┌─────────────────────────┐
# │                         │
# └─────────────────────────┘
# ┌────────────────────┐
# │                    │
# └────────────────────┘
# ┌────────────────────┐
# │                    │
# └────────────────────┘
# ┌───────────────────────┐
# │                       │
# └───────────────────────┘

# BLOCKS RECEIVED IN ORDER:
# ==================================
# Every 2 consecutive pair of blocks (received ordered by end_date.nil? last, start_date, created_at) is a different case:
#
# ┌───────────────────────┐
# │                       │
# └───────────────────────┘
# ┌────────────────────┐
# │                    │
# └────────────────────┘
# ┌────────────────────┐
# │                    │
# └────────────────────┘
# ┌─────────────────────────┐
# │                         │
# └─────────────────────────┘
#    ┌─────────────────┐
#    │                 │
#    └─────────────────┘
#      ┌───────────────┐
#      │               │
#      └───────────────┘
#        ┌───────────────────────┐
#        │                       │
#        └───────────────────────┘
#           ┌────────────────────────>
#           │
#           └────────────────────────>

#   OR

#                  ...
#        ┌───────────────────────┐
#        │                       │
#        └───────────────────────┘
#        ┌──────────────────────────────>
#        │
#        └──────────────────────────────>

#    OR
#                  ...
#        ┌───────────────────────┐
#        │                       │
#        └───────────────────────┘
#     ┌──────────────────────────────>
#     │
#     └──────────────────────────────>
