# - title: This is an example note
#   date: 2025-05-20
#   tags:
#     - sandbox-release
#     - new-feature
#   body: |
#     Enter the release note body here.
#
#     It can contain any markdown [supported by govuk-markdown](https://github.com/DFE-Digital/govuk-markdown#usage),
#     including:
#
#     * bulleted lists
#     * bulleted lists
#     * bulleted lists
#
#     1. numbered lists
#     2. numbered lists
#     3. numbered lists
#
#     [links](https://www.gov.uk)
#
#     **bold** and _italic_ text
- title: Change schedules endpoint released to the Register ECTs sandbox with updated validation rules
  date: 2026-01-16
  tags:
    - sandbox-release
  body: |
    The `PUT /participants/{id}/change-schedule` endpoint is now available in the Register ECTs sandbox. We have also updated the validation rules for when lead providers can change a participant’s schedule or cohort.

    These changes are defined in sections 19.1, 19.2 and 19.3 of the API specification.

    ## What’s changed from the existing ‘Manage training for early career teachers’ API?

    ### Only the current lead provider can update a participant’s schedule or cohort
    Lead providers can now only update schedules or cohorts when they are the current lead provider training the participant. If you are not the current lead provider, the request will return a validation error.
    
    If a participant has a future start date with a different lead provider, the current lead provider will no longer be able to change the schedule or cohort.
    
    The new lead provider will not be able to change the schedule or cohort until the participant has started training with them (their start date has elapsed).
    
    Previously, any lead provider could update a schedule or cohort as long as there were no billable declarations.

    ### You can now change schedules or cohorts even when there are billable declarations
    Lead providers can now move participants between schedules or cohorts when billable declarations exist, as long as they are the current lead provider for that participant.

    Previously, billable declarations prevented any further changes.

    ### Schedule and cohort changes are restricted after a declaration is submitted
    If you submit a declaration for a participant on a given day, you cannot make any further schedule or cohort changes for that participant until the next day. You can make multiple changes on the same day before you submit a declaration.

    Previously, multiple cohort changes could be made on the same day as a declaration.

    ## Why we’ve made these changes
    These changes are intended to avoid participants having multiple schedules or cohorts at the same time, and to ensure declarations can be reliably attached to the correct cohort.

    ## Impact on lead providers
    These changes may affect how you manage schedules and cohorts in some scenarios:
    
    * you will not be able to update schedules or cohorts for participants you are no longer training
    * you have more flexibility to move participants even when billable declarations exist
    * you may need to wait until the next day to make further cohort changes if you submit a declaration on the same day

    ## Example validation errors

    **Not the current lead provider**
    ```
    You cannot change this participant's schedule. Only the lead provider currently training this participant can update their schedule.
    ```

    **Participant is due to start with another lead provider**
    ```
    You cannot change this participant’s schedule as they are due to start with another lead provider in the future.
    ```

    **Moving a participant to a payments frozen cohort they were not previously part of**
    ```
    You cannot move a participant to a payments frozen cohort unless they previously belonged to that cohort.
    ```

    **Schedule change would invalidate declarations**
    ```
    The change of schedule cannot be applied because a previous change of schedule and a declaration were made on the same day. Applying another change of schedule would invalidate existing declarations. Please contact DfE for assistance.
    ```

    **Participant has completed training or induction
    ```
    You cannot change this participant’s schedule as they have completed their training or induction.
    ```
    
- title: Defer, withdraw, and resume endpoints endpoints added to the Register ECTs API with updated validation rules
  date: 2025-11-27
  tags:
    - sandbox-release
    - breaking-change
  body: |
    We have updated the validation logic and participant status behaviour for the following existing endpoints on the Register ECTs API:

    * `POST /participants/{id}/withdraw`
    * `POST /participants/{id}/defer`
    * `POST /participants/{id}/resume`

    ## What’s changed from the existing ‘Manage training for early career teachers’ API?

    ## Withdraw endpoint

    You can withdraw a participant as long as:

    * their `participant_status` isn't `joining`
    * they've been training for at least one day
    * they've not already been withdrawn (unchanged from the 'Manage training for ECTs' API)

    You will be presented with a validation error if you try to do any of these things.

    When a participant is withdrawn, the service will also set `participant_status` to `left` if it is not already set to this.

    If the participant never started training, please contact DfE to request deletion of the participant record instead of withdrawing them.

    ## Defer endpoint

    You can defer a participant as long as:

    * their `participant_status` isn't `joining`
    * they've been training for at least one day
    * they've not already been withdrawn or deferred (unchanged from the 'Manage training for ECTs' API)

    You will be presented with a validation error if you try to do any of these things.

    When a participant is deferred, the service will also set `participant_status` to `left` if it is not already set to this.

    ## Resume endpoint

    You can resume a participant as long as:

    * their old school has not reported that they are leaving
    * their new school has not reported that they are joining with a different lead provider
    * the school has not changed them to school-led training
    * the school has not changed them to a different lead provider for training

    You will be presented with a validation error if you try to do any of these things.

    If the new school reports they are joining with the same lead provider, their `participant_status` will move back to `joining` or `active`, and resuming will then be permitted.

    ## Why we've made these changes

    They ensure that participant status and training status stay consistent when lead providers carry out withdraw, defer or resume actions.

- title: GET participants endpoints added to sandbox   
  date: 2025-11-07
  tags: 
    - sandbox-release 
    - new-field 
    - removed-field
  body: |
    We’ve added the `GET /participants` endpoints to the ‘Register early career teachers’ API sandbox:
    
    * `GET /participants` to retrieve data for multiple participants 
    * `GET /participants/{id}` to get information about a single participant 
    
    ## What’s changed from the existing ‘Manage training for early career teachers’ API?  
    
    ### New induction start date field
    
    We’ve introduced the `overall_induction_start_date` field to show when an early career teacher (ECT) officially began their induction, as recorded by their appropriate body. Each ECT will only ever have one induction start date. 
    This field will not be populated over the API until the appropriate body has submitted the induction start date. This may sometimes be after an ECT would be expected to start training. 
    
    #### Why we’ve made this change 
    
    Lead providers requested this field to help:
    
    * confirm when induction has officially started
    * improve onboarding and schedule accuracy
    * identify transfers or ECTs with previous training history 
   
    ### TRN validated field removed
    
    The `trn_validated` field is no longer needed because every participant now needs a validated TRN checked with our records to be registered on the ‘Register ECTs’ service.

    ### Default schedule logic updated
    
    We’ve introduced a new approach for setting default schedules for participants. 
    
    For ECTs, default schedules will be based on school-provided start dates or when they were registered.
    
    For mentors, the logic will relate to: 
    
    * when we expect the mentor to start 
    * if they’re identified by the service as a replacement mentor 
    
    Existing records migrated from ‘Manage training for early career teachers’ will keep their current schedules. 
    
    #### Why we’ve made this change
    
    Lead providers requested this change to help:
    
    * reduce manual scheduling effort
    * automatically align new participants with realistic start times
    
    ### Additional participant status logic
    
    We’ve expanded how the `participant_status` field behaves so that is now shows providers:
    
    * if a participant has been reassigned to a different lead provider
    * if a participant has had their programme type changed to `school-led`
    
    If either value changes after a partnership has been formed, the participant will appear as `left` in the `GET /participants` and `GET /participants/{id}` responses. 
    This ensures they no longer disappear unexpectedly.
    
    #### Why we’ve made this change
    
    Previously, changing lead provider or programme type caused participants to vanish from the API. 
    
    This update improves data continuity and helps providers offboard correctly.
    
    ### Participant visibility updated 
    We’ve changed the logic for which participants are shown to lead providers. 
    
    Providers will now see any participant where both:
    
    * a school has stated at some point they’re the lead provider for that participant
    * a lead provider has either submitted a partnership or it’s been rolled over from a previous cohort by the school 
    
    This includes participants who later:
    
    * change lead provider or programme type
    * leave the school
    
    #### Why we’ve made this change
    
    Previously participants could disappear when partnerships changed.
    
    This update:
    
    * improves visibility and offboarding processes
    * ensures data security when multiple partnerships exist for the same school   

    ### We’ve removed the `withdrawn` attribute from `participant_status`   
    
    To simplify the data model and remove confusion, we’ve decided not to support the `withdrawn` attribute in the `participant_status` field. 
    
    Participants marked as `withdrawn` with no declarations will have their induction records removed. This allows them to be registered correctly at another school.
    
    Participants marked as `withdrawn` with declarations will be corrected to `left` to reflect valid, billable records.
    
    In some cases, participants that were previously visible to lead providers will be removed. These records were created in error and should not have been shared.
    
    We’ll contact affected providers in advance when we make these changes. 
    
    Going forward, if a school reports a participant was registered in error:
    
    * we'll remove the record
    * providers will be notified so they understand why the participant no longer appears in their data  
    
    #### Why we’ve made this change
    
    The withdrawn status was rarely used correctly and often caused confusion for lead providers and schools.
    
    Removing it improves:
    
    * data quality by ensuring only valid participant records are visible
    * clarity by replacing ambiguous `withdrawn` statuses with more accurate `left` records
    * future consistency by making sure new registrations and API responses are cleaner and easier to interpret 
    
    ### ECTs yet to start at a school shown as `joining`
    
    The `participant_status` field will show as `joining` for ECTs whose school start date is in the future, regardless of whether it's their first school or not.
    
    #### Why we’ve made this change
    
    We’ve made this change to give lead providers more accurate, easier-to-understand data through the API.
    
    ### Updated sparsity uplift and pupil premium attributes
    
    Sparsity uplift and pupil premium for mentors will now just show as `false`, rather than a mix of `true` or `false`.  
    
    #### Why we’ve made this change
    
    This uplift is no longer applied to mentors. 
    
    ### More filter options
    
    `GET /participants` can now be filtered by multiple cohorts at once, not just one.
    
    #### Why we’ve made this change
    
    It has the dual benefit of giving more functionality for lead providers and simplifying the endpoint build for us.  

- title: Partnerships endpoints now in sandbox for testing   
  date: 2025-09-26
  tags: 
    - sandbox-release 
    - new-field 
    - removed-field
  body: |
    We’ve added the partnerships endpoints to the [‘Register early career teachers’ API sandbox](https://sandbox.register-early-career-teachers.education.gov.uk/api/docs/v3):
    
    * `GET /partnerships` to retrieve multiple partnerships
    * `GET /partnerships/{id}` to retrieve an individual partnership
    * `POST /partnerships` to create a partnership
    * `PUT /partnerships/{id}` to update a partnership
    
    Read our [partnerships guidance](/api/guidance/guidance-for-lead-providers/create-view-and-update-partnerships) for more detailed information.

    ## What’s changed from the existing ‘Manage training for early career teachers’ API?  
    
    ### Challenge fields removed 
    
    Because schools now make changes at an individual participant level (for example, moving an ECT to a different provider) rather than challenging a school-wide partnership, we’ve removed challenge fields (`challenged_reason`, `challenged_at`, `status`) from partnership responses. 

    ### Providers can now see the number of ECTs or mentors currently training with them for a given partnership 
    
    We’ve added the numeric `participants_currently_training` field in the `GET /partnerships` endpoint. It shows lead providers whether any ECTs or mentors are currently training with them in a partnership.  
    
    ### New expression of interest field 
    
    We’ve introduced the `expression_of_interest` field in the `GET /schools` and `GET /schools/{id}` endpoints to show lead providers whether a school has any participants registered with them for that cohort. This should help lead providers create partnerships with schools that have stated they're training with them.
    
    The attribute holds one of 2 possible response values, `true` or `false`. 

    If a school has expressed interest but no partnership exists, creating one lets the lead provider see the school’s registered participants in the API.
    
    ### Multiple partnerships may appear 
    
    Previously, schools had a default partnership with a single lead provider for each cohort. 
    
    We’ve changed this to reflect that some schools need to set up partnerships with more than one lead provider. 
    
    In the API: 
    
    * `GET /partnerships` may return more than one partnership for the same school and cohort 
    * the `in_partnership` field will state `true` if any partnership exists and `false` if none exist 
    
    ### Earlier partnership submissions allowed 
    
    Lead providers can create a partnership even if the school hasn’t registered participants. The only exceptions are when the cohort has not opened, or the school is doing school-led training. 


- title: Schools endpoints now in sandbox for testing  
  date: 2025-08-13
  tags:
    - sandbox-release
  body: |
    We’ve added the `GET /api/v3/schools` and `GET /api/v3/schools/{id}` endpoints in the ['Register early career teachers' v3 API test (sandbox) environment](https://sandbox.register-early-career-teachers.education.gov.uk/api/docs/v3). 

    ### New `expression_of_interest` field 

    Shows as `true` when at least one participant for that cohort is registered with you as the lead provider. Once a partnership is confirmed, it remains `true` even if all participants later leave that school, change lead provider or change to `school-led` training. 

    ### Updated `induction_programme_choice` logic 

    Now shows `provider-led` if any participant in the cohort is on provider-led training. Shows `school-led` if all participants for that cohort are registered for `school-led` training for the school. Shows `not_yet_known` if no participants have been registered by the school yet. 

    ### Updated `in_partnership` logic 

    Now `true` when at least one partnership exists for the school and cohort, and `false` when none exist. We also now allow multiple partnerships per cohort between different lead providers. However, we'll only allow a lead provider to create one partnership per cohort with a school each for our initial release. 

- title: Delivery partner details available in API sandbox 
  date: 2025-08-12
  tags:
    - sandbox-release
  body: |
   Lead providers can now view delivery partner details for their schools via `GET /api/v3/delivery-partners` and `GET /api/v3/delivery-partners/{id}` endpoints in the ['Register early career teachers' v3 API test (sandbox) environment](https://sandbox.register-early-career-teachers.education.gov.uk/api/docs/v3).
  
   There are no changes to the functionality compared to the delivery partner endpoints in the ‘Manage training for early career teachers’ API.
  
   Note that: 
  
   * lead providers will only see delivery partners who they’ve got a partnership with
   * updates, name changes, or removals from a cohort appear in the endpoints 
   * delivery partner IDs follow the ECF1 format 

- title: View financial statements in test environment
  date: 2025-06-23
  tags:
    - sandbox-release
    - removed-field
  body: |
   Lead providers can now check their financial statements in the ['Register early career teachers' v3 API test (sandbox) environment](https://sandbox.register-early-career-teachers.education.gov.uk/api/docs/v3).

   Use the `GET /api/v3/statements` endpoint to retrieve all statements or `GET /api/v3/statements/{id}` endpoint to retrieve a specific statement.

   We’ve removed the `type` field from the responses. We used it to differentiate between NPQ and early career training statements, but it's no longer needed.

   We’d welcome feedback on this update before it goes into production. Share any suggestions or concerns via the usual Slack channels.
