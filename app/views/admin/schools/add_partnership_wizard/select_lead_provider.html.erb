<%
  title = "Select the lead provider for #{@wizard.selected_contract_period.year}"

  page_data(
    title:,
    error: @wizard.current_step.errors.present?,
    backlink_href: @wizard.previous_step_path
  )
%>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <%= form_with(model: @wizard.current_step, url: @wizard.current_step_path) do |f| %>
      <%= content_for(:error_summary) { f.govuk_error_summary } %>

      <%= f.govuk_radio_buttons_fieldset(
        :active_lead_provider_id,
        legend: { text: title, hidden: true }
      ) do %>
        <% @wizard.active_lead_providers.each_with_index do |active_lead_provider, index| %>
          <%= f.govuk_radio_button(
            :active_lead_provider_id,
            active_lead_provider.id,
            label: { text: active_lead_provider.lead_provider.name },
            link_errors: index.zero?
          ) %>
        <% end %>
      <% end %>

      <%= f.govuk_submit "Continue" %>
    <% end %>
  </div>
</div>
