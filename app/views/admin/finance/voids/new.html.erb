<% page_data(
  title: "Void declaration for #{teacher_full_name(@teacher)}",
  backlink_href: admin_teacher_declarations_path(@teacher)
) %>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    <%=
      govuk_summary_list(actions: false) do |summary_list|
        summary_list.with_row do |row|
          row.with_key { "Declaration ID" }
          row.with_value { tag.span(@declaration.api_id, class: "app-mono") }
        end

        summary_list.with_row do |row|
          row.with_key { "Course identifier" }
          row.with_value { tag.span(declaration_course_identifier(@declaration), class: "app-mono") }
        end

        summary_list.with_row do |row|
          row.with_key { "Declaration type" }
          row.with_value { tag.span(@declaration.declaration_type, class: "app-mono") }
        end

        summary_list.with_row do |row|
          row.with_key { "State" }
          row.with_value { declaration_state_tag(@declaration) }
        end

        summary_list.with_row do |row|
          row.with_key { "Declaration date and time" }
          row.with_value { @declaration.declaration_date.to_fs(:govuk) }
        end

        summary_list.with_row do |row|
          row.with_key { "Lead provider" }
          row.with_value { @declaration.lead_provider&.name }
        end

        summary_list.with_row do |row|
          row.with_key { "Delivery partner" }
          row.with_value { @declaration.delivery_partner_when_created&.name || "Delivery partner not recorded" }
        end

        summary_list.with_row do |row|
          row.with_key { "Evidence held" }
          row.with_value { tag.span(@declaration.evidence_type, class: "app-mono") }
        end
      end
    %>

    <%= form_with model: @void_declaration_form, url: admin_declaration_voids_path(@declaration), method: :post do |f| %>
      <%= content_for(:error_summary) { f.govuk_error_summary } %>

      <%= f.govuk_check_boxes_fieldset :confirmed, multiple: false, legend: nil do %>
        <%= f.govuk_check_box(:confirmed, "1", false, link_errors: true, multiple: false, label: {
          text: "I confirm I want to void this declaration and I understand that it cannot be undone"
        }) %>
      <% end %>

      <%= f.govuk_submit "Confirm void declaration", warning: true, class: "govuk-!-margin-top-6" %>
    <% end %>
  </div>
</div>
