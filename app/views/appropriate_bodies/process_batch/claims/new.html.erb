<%
  page_data(
    title: "Upload a CSV to claim multiple ECTs",
    error: @pending_induction_submission_batch.errors.any?,
    backlink_href: ab_teachers_path
  )
%>

<p class="govuk-body">
  If you already have a CSV file which follows our formatting, you can upload it.
  Or you can <%= govuk_link_to('download a CSV template', '/bulk-claims-template.csv') %>.
</p>

<%= govuk_details(summary_text: 'What to include in your CSV file') do %>
  <p class="govuk-body">
    For each ECT you must include:
  </p>

  <%=
    govuk_list([
      'their date of birth in YYYY-MM-DD format',
      'their teacher reference number (TRN) - must be 7 digits',
      'their induction programme - must be FIP, CIP, or DIY',
      'their induction period start date in YYYY-MM-DD format'
      ], type: :bullet)
  %>

  <p class="govuk-body">
    For dates, you may need to reformat each cell so it follows our formatting before save and upload the CSV file.
  </p>

  <%=
    govuk_table(
      caption: "Your file needs to look like this example",
      head: BatchRows::CLAIM_CSV_HEADINGS.values.reverse.drop(1).reverse,
      rows: [
        %w[1234567 2000-11-10 FIP 2024-09-01],
        %w[2345671 1987-03-29 CIP 2024-10-15],
        %w[3456712 1992-01-14 DIY 2024-11-01],
      ]
    )
  %>
<% end %>


<%= form_with(model: @pending_induction_submission_batch, url: ab_batch_claims_path, method: 'post') do |f| %>

  <%= content_for(:error_summary) { f.govuk_error_summary } %>

  <%= f.govuk_file_field :csv_file,
    accept: '.csv',
    label: { text: 'Upload a file' },
    hint: { text: 'File type must be a CSV' }
  %>

  <%= f.govuk_submit 'Continue' %>
<% end %>
